(()=>{var v=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var n=(t,r,e)=>new Promise((a,p)=>{var s=c=>{try{_(e.next(c))}catch(d){p(d)}},i=c=>{try{_(e.throw(c))}catch(d){p(d)}},_=c=>c.done?a(c.value):Promise.resolve(c.value).then(s,i);_((e=e.apply(t,r)).next())});var C=v(o=>{var u=(t,r)=>n(o,null,function*(){let e=yield fetch(t,r),a=yield e.json();if(e.ok)return a;throw new Error(t.toString()+" "+e.statusText)}),f=t=>n(o,null,function*(){let r=yield Promise.all([u(`https://api.v2.agro.club/api/v1/market/bids/?bid_type=purchase&page_size=1&sort=-price_exw&product=${t}&source_address=36818`),u(`https://api.v2.agro.club/api/v1/market/bids/?bid_type=sale&page_size=1&sort=price_cpt&product=${t}&source_address=36818`)]);return[r[0].results[0],r[1].results[0]]}),w=()=>n(o,null,function*(){let t=[],r=yield u("https://api.v2.agro.club/api/v1/products?page_size=6");return(yield Promise.all(r.slice(0,6).map(a=>f(a.slug)))).filter(a=>a[0]&&a[1]).forEach((a,p)=>{let s=a[0],i=a[1];t.push({title:r[p].title,purchase:{priceExw:s.price_exw,priceCpt:s.price_cpt},sale:{priceExw:i.price_exw,priceCpt:i.price_cpt}})}),t}),A=w(),m=(t,r)=>`
  <div class="grains__card">
    <h4 class="grains__card__title typography_h5">${t.title}</h4>
    <div class="grains__card__description typography_caption-default">
      300 \u0442 / \u226510
    </div>
    <div class="grains__card__prices">
      <div
        class="grains__card__price typography_caption-default"
        data-type="cpt"
      >
        ${t[r].priceCpt} \u20BD/\u043A\u0433
        <span class="grains__card__price__caption typography_caption-default">
          CPT
        </span>
      </div>
      <div class="grains__card__price typography_h5-bold" data-type="exw">
        ${t[r].priceExw} \u20BD/\u043A\u0433
        <span class="grains__card__price__caption typography_caption-default">
          EXW
        </span>
      </div>
    </div>
  </div>
`,l="",g="",h=0,b=t=>{if(!(!l||!g))return h===1?t.html(l):t.html(g)},P=t=>{t.forEach((r,e)=>{e!==h?r.attr("data-active","false"):r.attr("data-active","true")})},y=(t,r,e)=>a=>{h=e,P(r),b(t)};$(document).ready(()=>{let t=$("#grains__content"),r=$("#grains__tabs__tab_purchase"),e=$("#grains__tabs__tab_sale"),a=[r,e];P(a),r.on("click",y(t,a,0)),e.on("click",y(t,a,1)),A.then(p=>{[l,g]=p.reduce((s,i)=>[s[0]+m(i,"purchase"),s[1]+m(i,"sale")],["",""]),b(t),$("#grains__loader").hide()})})});C();})();
