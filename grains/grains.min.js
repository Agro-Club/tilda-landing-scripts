(()=>{var P=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var n=(r,t,e)=>new Promise((a,s)=>{var i=p=>{try{_(e.next(p))}catch(d){s(d)}},c=p=>{try{_(e.throw(p))}catch(d){s(d)}},_=p=>p.done?a(p.value):Promise.resolve(p.value).then(i,c);_((e=e.apply(r,t)).next())});var A=P(o=>{var u=(r,t)=>n(o,null,function*(){let e=yield fetch(r,t),a=yield e.json();if(e.ok)return a;throw new Error(r.toString()+" "+e.statusText)}),v=r=>n(o,null,function*(){let t=yield Promise.all([u(`https://api.v2.agro.club/api/v1/market/bids/?bid_type=purchase&page_size=1&sort=-price_exw&product=${r}&source_address=36818`),u(`https://api.v2.agro.club/api/v1/market/bids/?bid_type=sale&page_size=1&sort=price_cpt&product=${r}&source_address=36818`)]);return[t[0].results[0],t[1].results[0]]}),f=()=>n(o,null,function*(){let r=[],t=yield u("https://api.v2.agro.club/api/v1/products?page_size=6");return(yield Promise.all(t.slice(0,6).map(a=>v(a.slug)))).filter(a=>a[0]&&a[1]).forEach((a,s)=>{let i=a[0],c=a[1];r.push({title:t[s].title,purchase:{priceExw:i.price_exw,priceCpt:i.price_cpt},sale:{priceExw:c.price_exw,priceCpt:c.price_cpt}})}),r}),w=f(),h=(r,t)=>`
  <div class="grains__card">
    <h4 class="grains__card__title typography_h5">${r.title}</h4>
    <div class="grains__card__description typography_caption-default">
      300 \u0442 / \u226510
    </div>
    <div class="grains__card__prices">
      <div
        class="grains__card__price typography_caption-default"
        data-type="cpt"
      >
        ${r[t].priceCpt} \u20BD/\u043A\u0433
        <span class="grains__card__price__caption typography_caption-default">
          CPT
        </span>
      </div>
      <div class="grains__card__price typography_h5-bold" data-type="exw">
        ${r[t].priceExw} \u20BD/\u043A\u0433
        <span class="grains__card__price__caption typography_caption-default">
          EXW
        </span>
      </div>
    </div>
  </div>
`,l="",g="",y=0,b=r=>{if(!(!l||!g))return y===1?r.html(l):r.html(g)},m=(r,t,e)=>a=>{y=e,t.forEach((s,i)=>{i!==e?s.attr("data-active","false"):s.attr("data-active","true")}),b(r)};$(document).ready(()=>{let r=$("#grains__content"),t=$("#grains__tabs__tab_purchase"),e=$("#grains__tabs__tab_sale"),a=[t,e];t.on("click",m(r,a,0)),e.on("click",m(r,a,1)),w.then(s=>{[l,g]=s.reduce((i,c)=>[i[0]+h(c,"purchase"),i[1]+h(c,"sale")],["",""]),b(r),$("#grains__loader").hide()})})});A();})();
